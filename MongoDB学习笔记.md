# MongoDB学习笔记

# 安装MongoDB
#### windows安装(仅限64位系统)
下载软件：https://fastdl.mongodb.org/win32/mongodb-win32-x86_64-2012plus-4.2.6-signed.msi  
安装软件：下一步 下一步，在倒数第2步界面左下角有一个选项“Install MongoDB Compass”，可以取消勾选，稍后单独安装 MongoDB Compass  
运行软件：安装完成后，找到 安装目录\MongoDB\Server\4.2\bin\mongo.exe，运行mongo.exe  
编写测试：  
````
var message = 'hello mongodb'
pritejson(message)
````

#### 安装MongoDB Compass：  
MongoDB Compass 是图形可视化管理MongoDB数据库的工具。  
若在安装 MongoDB 过程中，没有同步安装 MongoDB Compass，需要手工下载并安装。  
下载软件：https://downloads.mongodb.com/compass/mongodb-compass-1.21.2-win32-x64.msi  
安装软件：下一步 下一步  
运行软件：运行MongoDBCompass.exe，进入软件后，先看完软件介绍后，点击继续按钮，即可看到当前本机MongoDB数据状态。  

# MongoDB优势
MongoDB以JSON文档形式储存数据。  

以下笔记来源于：唐建法的《MongoDB高手课》视频教程  

对于JSON而言：  
1、简单直观：以自然的方式来建模(自由定义数据模型)，以直观的方式与数据库交互(JSON与Object可直接相互转换)。  
2、结构灵活：弹性模式从容相应需求的频繁变化(不要求某集合中所有元素属性都必须一致)。  
3、快速开发：做更少的事，写更少的代码(可直接把数据以Object形式传递给数据库，而不像Mysql那样需要把一条数据中的各个属性拆分出来)。  

不需要考虑错综复杂的关系模型、一目了然的对象模型。  

对于开发人员而言：  
1、灵活：快速响应业务变化，具体表现为：  

- 多形性：同一个集合中可以包含不同字段(类型)的文档对象。即JSON的特性，例如允许某集合中前100名用户有一个属性，而100名以后的用户没有该属性。
- 动态性：线上修改数据模式，修改时应用和数据库均无需下线。 例如某集合所有数据由原来的每条10个属性增加到12个属性，这个操作可以直接在线上操作，无需让数据库先关停修改好后再上线。
- 数据治理：支持使用JSON Schema 来规范数据模式。在保证模式灵活动态的前提下，提供数据治理能力。  简单来说就是MongoDB也可以像Mysql那样对每个表(在MongoDB中叫集合)进行数据格式规范。 

2、快速：JSON模型的快速特性(数据库运行效率、程序员开发效率)
  
- 数据库引擎只需要在一个存储区读写：相对Mysql需要建立多个关联表而言，MongoDB某一集合所有数据均在同一个存储区里。  
- 反范式、无关联的组织极大优化查询速度：对于计算机而言，修改一条数据需要“定位和读写”，而“定位”和“读写”所需要消耗的性能占比，分别为95%和5%。 也就是说对于修改某条数据而言“定位”是最花费时间的。而Mysql通常为多表，不同表之间相互切换定位所花费时间会更多。最为关键的是开发者编写的代码，如果是Mysql需要编写多个表的操作代码，如果是MongoDB则直接操作一个集合即可。  
- 程序API自然，开发快速：JSON非常接近程序员原本的对象操作方式，所以开发效率高。

对于运维人员而言：  
1、原生的高可用和横向扩展能力：  

- 节点 复制集(Replica Set)数量可以是2-50个，默认安装为3个(1个Primary和2个Secondary)
- 自动恢复，若主节点发生故障，从节点可自动恢复替换主节点。
- 支持多中心部署，多中心容灾，数据同步。
- 滚动服务。 例如先只修改其中一个副节点，然后通过 MongoDB复制集 的方式将其他节点都进行修改，从而实现数据库不下线的情况下进行数据库改造升级。  

2、横向扩展能力：  

- 通过分片集群，可以无缝扩展
- 应用全透明
- 多种数据分布策略
- 轻松支持TB-PB数量级

MongoDB技术优势总结：  
1、JSON结构和对象模型接近、开发代码量低  
2、JSON的动态模型意味着更容易响应新的业务变化需求  
3、复制集提供高可用  
4、分片架构支持海量数据和无缝扩容  

## MongoDB基础用法





